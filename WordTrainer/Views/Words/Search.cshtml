
<div class="container" style="margin-top: 80px;">
        <div class="form-group row d-flex justify-content-center">
            <input type="text" id="searchBox" class="form-control col-sm-9 mx-2" placeholder="Enter word here" />
            <button id="btnSearch" type="button" class="btn btn-primary mx-2 col-sm-2">Search</button>
        </div>
</div>

<div id="word-presenter" class="container mt-5 px-5">
    <h3 id="wordBox" class="h3"></h3>
    <hr />
    <p id="translationBox" class="font-italic text-justify"></p>
    <br />
    <p name="title" class="font-italic d-none">Examples:</p>
    <div id="examplesBox" class="text-justify"></div>
</div>



<script type="module">

    import { Word } from '/script.js';
    // Gets data from local storage
    var temp = JSON.parse(localStorage.getItem("model"));
    // var arr = [];
    var dict = new Map();
    for (const i of temp) {
        // arr.push(Word.parse(i));
        dict.set(i['text'].toLowerCase(), Word.parse(i));
    }
    var ammount = dict.size;

    // Gets elements
    var searchBox = document.getElementById("searchBox");
    var btnSearch = document.getElementById("btnSearch");
    var wordBox = document.getElementById("wordBox");
    var translationBox = document.getElementById("translationBox");
    var examplesBox = document.getElementById("examplesBox");
    
    // Adds EventListener for 'Enter' key press
    searchBox.addEventListener("keyup", function (e) {
        if (e.keyCode == 13) {
            btnSearch.click();
        }
    });

    // Adds event listener to 'btn'
    btnSearch.addEventListener("click", btnSearchClick);
    function btnSearchClick(event) {
        // If trans is empty - interrupt event executing
        if (searchBox.value === "") {
            event.preventDefault();
        }
        else {
            // If translation is right
            var word = "";
            if (dict.has(searchBox.value.toLowerCase()) == true) {
                word = dict.get(searchBox.value);
                var titleBox = document.getElementsByName("title");
                for (var item of titleBox) {
                    item.className = "font-italic d-block";
                }
                wordBox.innerHTML = word.text;
                translationBox.innerHTML = word.translation;

                examplesBox.innerHTML = (function () {
                    var res = "";
                    var trans = word.examples.split(".").filter(p => p.length > 1);
                    for (var item of trans) {
                        res += "<span>&#10004;</span>" + item.trim() + "<br/><br/>";
                    }
                    return res;
                })();
                searchBox.value = "";
                searchBox.focus();
            }
            else {
                wordBox.innerText = "Such word does not exist in the storage";
                searchBox.focus();
                event.preventDefault();
            }
        }
    } 


    
          

</script>


    